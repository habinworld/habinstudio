<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ê¸€ ë³´ê¸° Â· Ha-Bin Studio</title>
<link rel="stylesheet" href="style.css">

<style>
/* =============== ì „ì²´ ì»¨í…Œì´ë„ˆ =============== */
.view-container {
  max-width: 900px;
  margin: 0 auto;
  padding: 0 20px 120px;
}

/* =============== ìƒë‹¨ ê³µì§€ + ë²„íŠ¼ ì˜ì—­ =============== */
.view-top-bar {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 14px;
}

.notice-area {
  display: flex;
  align-items: center;
  gap: 6px;
}

.notice-area label {
  font-size: 15px;
  font-weight: 600;
}

.top-btns a {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: 6px 12px;
  background: #3558A8;
  color: white;
  border-radius: 6px;
  font-size: 15px;
  font-weight: 600;
  text-decoration: none;
  margin-left: 6px;
}
.top-btns a:hover { opacity: 0.9; }

/* =============== ì œëª© ì˜ì—­ =============== */
#view-title {
  width: 100%;
  font-size: 26px;
  font-weight: 800;
  margin-bottom: 8px;
  line-height: 1.4;
  color: #222;
}

/* ê³µì§€ ë°°ì§€ */
.notice-badge {
  display: inline-block;
  margin-right: 6px;
  padding: 4px 8px;
  background: #FFF1A8;
  border: 1px solid #E2C55A;
  border-radius: 6px;
  font-size: 14px;
  font-weight: 700;
  color: #8A6B00;
}

/* ì‘ì„±ì/ë‚ ì§œ */
#view-info {
  color: #777;
  font-size: 14px;
  border-bottom: 1px solid #e5e5e5;
  padding-bottom: 10px;
  margin-bottom: 20px;
}

/* ë³¸ë¬¸ */
#view-content {
  font-size: 17px;
  line-height: 1.8;
  color: #2b2b2b;
  margin-bottom: 40px;
}

/* ë³¸ë¬¸ ì´ë¯¸ì§€ ì¤‘ì•™ */
#view-content img {
  max-width: 100%;
  display: block;
  margin: 14px auto;
  border-radius: 8px;
}

/* í•˜ë‹¨ ë²„íŠ¼ */
.view-buttons {
  display: flex;
  justify-content: flex-end;
  gap: 10px;
  margin-top: 20px;
}

.view-btn {
  padding: 9px 16px;
  border-radius: 8px;
  border: none;
  cursor: pointer;
  font-size: 14px;
  font-weight: 600;
}

/* ë²„íŠ¼ìƒ‰ editor.htmlê³¼ í†µì¼ */
.btn-edit { background:#3558A8; color:white; }
.btn-edit:hover { background:#5C8EDB; }

.btn-delete { background:#D9534F; color:white; }
.btn-delete:hover { background:#C3413B; }

.btn-list { background:#3558A8; color:white; }
.btn-list:hover { background:#5C8EDB; }

.btn-main { background:#3558A8; color:white; }
.btn-main:hover { background:#5C8EDB; }
</style>
</head>

<body>

<script src="secret-gate.js"></script>

<div class="view-container">

  <!-- ğŸ”¥ ìƒë‹¨: ê³µì§€ + ë²„íŠ¼  -->
  <div class="view-top-bar">
    <div class="notice-area">
      <input type="checkbox" id="notice-check">
      <label for="notice-check">ğŸ“Œ ê³µì§€ê¸€ë¡œ ë“±ë¡í•˜ê¸°</label>
    </div>

    <div class="top-btns">
      <a href="list.html">ëª©ë¡</a>
      <a href="index.html">ë©”ì¸</a>
    </div>
  </div>

  <!-- ğŸ”¥ ì œëª© / ì •ë³´ / ë³¸ë¬¸ -->
  <h1 id="view-title"></h1>
  <div id="view-info"></div>
  <div id="view-content"></div>

  <!-- ğŸ”¥ í•˜ë‹¨ ë²„íŠ¼ -->
  <div class="view-buttons">
    <button class="view-btn btn-edit" id="editBtn">ìˆ˜ì •</button>
    <button class="view-btn btn-delete" id="deleteBtn">ì‚­ì œ</button>
    <button class="view-btn btn-list" onclick="location.href='list.html'">ëª©ë¡</button>
    <button class="view-btn btn-main" onclick="location.href='index.html'">ë©”ì¸</button>
  </div>

</div>

<script>
/* ======================================================
   ğŸ“Œ URLì—ì„œ id ê°€ì ¸ì˜¤ê¸°
====================================================== */
const params = new URLSearchParams(window.location.search);
const postId = params.get("id");

let posts = JSON.parse(localStorage.getItem("habin_posts") || "[]");
const post = posts.find(p => p.id == postId);

/* ======================================================
   ğŸ“Œ ê¸€ ë°ì´í„° í‘œì‹œ
====================================================== */
if (post) {
  document.getElementById("view-title").innerHTML =
    (post.isNotice ? `<span class="notice-badge">ğŸ“Œ ê³µì§€</span>` : "") + post.title;

  document.getElementById("view-info").innerHTML =
    `ì‘ì„±ì: ${post.writer} Â· ${post.date}`;

  document.getElementById("view-content").innerHTML = post.content;

  /* ğŸ”¥ ê³µì§€ ì²´í¬ ìƒíƒœ ë°˜ì˜ */
  document.getElementById("notice-check").checked = !!post.isNotice;
}

/* ======================================================
   ğŸ”¥ ê³µì§€ ì²´í¬ ë³€ê²½ â†’ ì¦‰ì‹œ localStorage ë°˜ì˜
====================================================== */
document.getElementById("notice-check").addEventListener("change", function () {
  const isChecked = this.checked;
  const idx = posts.findIndex(p => p.id == postId);

  posts[idx].isNotice = isChecked;
  localStorage.setItem("habin_posts", JSON.stringify(posts));

  alert("ê³µì§€ ìƒíƒœê°€ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤.");
});

/* ======================================================
   ğŸ“Œ ìˆ˜ì • / ì‚­ì œ
====================================================== */
document.getElementById("editBtn").onclick = () => {
  location.href = `editor.html?id=${postId}`;
};

document.getElementById("deleteBtn").onclick = () => {
  if (!confirm("ì •ë§ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?")) return;

  posts = posts.filter(p => p.id != postId);
  localStorage.setItem("habin_posts", JSON.stringify(posts));
  location.href = "list.html";
};
</script>

</body>
</html>


